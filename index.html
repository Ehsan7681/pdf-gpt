<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุณุณุชู ูพุฑุณุด ู ูพุงุณุฎ ุงุณูุงุฏ (ูุณุฎู ุขููุงู)</title>
    <link rel="stylesheet" href="online-style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script>
        // ุชูุธู ูุณุฑ ฺฉุชุงุจุฎุงูู PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>
<body>
    <!-- ุฏฺฉูู ุชุบุฑ ุชู -->
    <button class="theme-toggle" id="themeToggle" aria-label="ุชุบุฑ ุญุงูุช ููุงุด">
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
        </svg>
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" />
        </svg>
    </button>

    <div class="container">
        <div class="glass-card">
            <div class="api-key-section">
                <div class="api-input-container">
                    <div class="input-label">ฺฉูุฏ API</div>
                    <input type="text" id="apiKeyInput" placeholder="ฺฉูุฏ API ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ..." class="api-key-input">
                    <div class="input-help">
                        <a href="https://openrouter.ai/keys" target="_blank" class="help-link">ุจุฑุง ุฏุฑุงูุช ฺฉูุฏ API ุงุฒ ุณุงุช OpenRouter ฺฉูฺฉ ฺฉูุฏ</a>
                    </div>
                </div>
                <div class="api-input-container">
                    <div class="input-label">ุงูุชุฎุงุจ ูุฏู ููุด ูุตููุน</div>
                    <select id="modelSelect" class="model-select api-key-input">
                        <option value="">ุงูุชุฎุงุจ ูุฏู...</option>
                    </select>
                </div>
                <div class="api-input-container">
                    <div class="input-label">ุญุฏุงฺฉุซุฑ ุชูฺฉู ูพุงุณุฎ</div>
                    <input type="number" id="maxTokensInput" min="100" max="4000" step="100" placeholder="ุญุฏุงฺฉุซุฑ ุชูฺฉู..." class="api-key-input" title="ุชุนุฏุงุฏ ุญุฏุงฺฉุซุฑ ุชูฺฉู ุจุฑุง ูุฑ ูพุงุณุฎ (100 ุชุง 4000)">
                </div>
                <button id="saveApiKey" class="save-api-button">ุงุนูุงู</button>
            </div>
            <div class="connection-status">
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span id="statusText">ูุทุน</span>
                </div>
                <button id="toggleConnection" class="toggle-button">ุงุชุตุงู</button>
            </div>
            <h1>ุณุณุชู ูพุฑุณุด ู ูพุงุณุฎ ุงุณูุงุฏ (ูุณุฎู ุขููุงู)</h1>
            
            <div class="upload-section">
                <div class="file-input-wrapper">
                    <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png" class="file-input">
                    <label for="fileInput" class="file-label">
                        <span>ุงูุชุฎุงุจ ูุงู PDFุ Word ุง ุชุตูุฑ</span>
                    </label>
                </div>
                <div id="fileName" class="file-name"></div>
            </div>

            <div class="chat-section">
                <div class="chat-header">
                    <h3>ฺฏูุชฺฏู</h3>
                    <button id="clearChat" class="clear-button">ูพุงฺฉ ฺฉุฑุฏู ฺฏูุชฺฏู</button>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-guide" id="chatGuide">
                        <div class="chat-guide-content">
                            <div class="chat-guide-icon">๐ฌ</div>
                            <div class="chat-guide-text">ูุงู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ ู ุณูพุณ ุณุคุงู ุฎูุฏ ุฑุง ุจูพุฑุณุฏ.</div>
                            <div class="chat-guide-text">ูโุชูุงูุฏ ุฏุฑุจุงุฑู ูุญุชูุง ุณูุฏ ุณุคุงู ฺฉูุฏ ุง ุฏุฑุฎูุงุณุช ุฎูุงุตูโุณุงุฒ ููุงุฏ.</div>
                        </div>
                    </div>
                </div>
                <div class="new-messages-indicator" id="newMessagesIndicator">ูพุงูโูุง ุฌุฏุฏ โ</div>
                <div class="input-section">
                    <textarea id="userInput" placeholder="ุณูุงู ุฎูุฏ ุฑุง ุจูพุฑุณุฏ ุง ุฏุฑุฎูุงุณุช ุฎูุงุตู ฺฉูุฏ..." class="user-input"></textarea>
                    <button id="sendButton" class="send-button">ุงุฑุณุงู</button>
                </div>
            </div>
            
            <!-- ุจุฎุด ุขุฒููู ฺูุฏฺฏุฒููโุง -->
            <div class="quiz-section">
                <div class="quiz-header">
                    <h3>ุงุฌุงุฏ ุขุฒููู ุงุฒ ูุญุชูุง</h3>
                    <div class="quiz-tabs">
                        <button id="showQuizBuilder" class="quiz-tab active">ุทุฑุงุญ ุขุฒููู</button>
                        <button id="showQuizTaker" class="quiz-tab">ุขุฒููู</button>
                        <button id="showQuizResults" class="quiz-tab">ูุชุงุฌ</button>
                    </div>
                </div>
                
                <!-- ุจุฎุด ุทุฑุงุญ ุขุฒููู -->
                <div id="quizBuilderPanel" class="quiz-panel active">
                    <div class="quiz-prompt-container">
                        <div class="input-label">ุฏุณุชูุฑุงูุนูู ุงุฌุงุฏ ุขุฒููู</div>
                        <textarea id="quizPrompt" placeholder="ุชูุถุญ ุฏูุฏ ฺู ููุน ุขุฒููู ูโุฎูุงูุฏ (ูุซุงู: ุงุฌุงุฏ 5 ุณูุงู ฺูุงุฑฺฏุฒููโุง ุงุฒ ูุจุงุญุซ ุงุตู ูุชู)..." class="quiz-prompt"></textarea>
                        <div class="quiz-options">
                            <div class="quiz-option">
                                <label for="questionCount">ุชุนุฏุงุฏ ุณูุงูุงุช:</label>
                                <input type="number" id="questionCount" min="1" max="20" value="5">
                            </div>
                            <div class="quiz-option">
                                <label for="quizType">ููุน ุณูุงูุงุช:</label>
                                <select id="quizType">
                                    <option value="mixed">ุชุฑฺฉุจ</option>
                                    <option value="multichoice">ฺูุงุฑฺฏุฒููโุง</option>
                                    <option value="truefalse">ุตุญุญ/ุบูุท</option>
                                </select>
                            </div>
                            <div class="quiz-option">
                                <label for="quizDifficulty">ุณุทุญ ุฏุดูุงุฑ:</label>
                                <select id="quizDifficulty">
                                    <option value="mixed">ุชุฑฺฉุจ</option>
                                    <option value="easy">ุณุงุฏู</option>
                                    <option value="medium">ูุชูุณุท</option>
                                    <option value="hard">ุฏุดูุงุฑ</option>
                                </select>
                            </div>
                        </div>
                        <button id="generateQuiz" class="quiz-generate-button">ุงุฌุงุฏ ุขุฒููู</button>
                    </div>
                </div>
                
                <!-- ุจุฎุด ุขุฒูููโุฏู -->
                <div id="quizTakerPanel" class="quiz-panel">
                    <div id="quizContainer" class="quiz-container">
                        <div class="quiz-loading" id="quizLoading">
                            <div class="quiz-loading-text">ุฏุฑ ุญุงู ุงุฌุงุฏ ุขุฒููู...</div>
                            <div class="quiz-loading-spinner"></div>
                        </div>
                        <div id="quizQuestions" class="quiz-questions"></div>
                        <div class="quiz-actions">
                            <button id="submitQuiz" class="quiz-submit-button">ุซุจุช ูพุงุณุฎโูุง</button>
                            <button id="clearQuiz" class="quiz-clear-button">ูพุงฺฉ ฺฉุฑุฏู ููู</button>
                        </div>
                    </div>
                </div>
                
                <!-- ุจุฎุด ูุชุงุฌ ุขุฒููู -->
                <div id="quizResultsPanel" class="quiz-panel">
                    <div id="resultsContainer" class="results-container">
                        <div class="quiz-score">
                            <span>ููุฑู ุดูุง:</span>
                            <span id="quizScore" class="quiz-score-value">0/0</span>
                        </div>
                        <div id="quizResultDetails" class="quiz-result-details"></div>
                        <button id="newQuizButton" class="new-quiz-button">ุงุฌุงุฏ ุขุฒููู ุฌุฏุฏ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ุฏุงููฺฏ ุชุงุฏ ุจุฑุง ูพุงฺฉ ฺฉุฑุฏู ฺฏูุชฺฏู -->
    <div id="confirmDialog" class="modal-overlay">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">ุชุฃุฏ ูพุงฺฉ ฺฉุฑุฏู</h3>
            </div>
            <div class="modal-body">
                ุขุง ุงุฒ ูพุงฺฉ ฺฉุฑุฏู ุชูุงู ฺฏูุชฺฏููุง ูุทูุฆู ูุณุชุฏุ ุงู ุนูู ูุงุจู ุจุงุฒฺฏุดุช ูุณุช.
            </div>
            <div class="modal-footer">
                <button id="cancelClear" class="modal-button cancel">ุงูุตุฑุงู</button>
                <button id="confirmClear" class="modal-button confirm">ูพุงฺฉ ฺฉุฑุฏู</button>
            </div>
        </div>
    </div>
    
    <!-- ููุชูฺฉุดูโูุง ุณุณุชู -->
    <div id="systemNotification" class="system-notification">
        <div class="notification-content"></div>
    </div>
    
    <script src="online-script.js"></script>
</body>
</html> 
